@model DTO.EventoLista

@* FORMULÁRIO *@
<div id="" class="conteudo">
    <section>

        @* TARJA SUPERIOR *@
        <div class="tarja-superior cor-degrade-preto">
            <h4><span class="animated infinite bounceInLeft">&#10687;</span><b>CONSULTA EVENTOS</b></h4>

            @* BOTÃO FECHAR *@
            <div class="btn-sair-formulario"><b>SAIR</b></div>
        </div>

        @{
            // MENU UNIDADES
            // APRESENTADO SOMENTE PARA DIRETORIA OU SUPORTE
            string perfil = Session["PerfilAcesso"].ToString();
            if (perfil == "DIR" || perfil == "SUP")
            {
                @Html.Partial("_UnidadesRegional")
            }

            // CAMPO BUSCA
            if (ViewBag.Pesquisa == true)
            {
                <div class="campo-busca">
                    <form action="~/Evento/PostPesquisarEvento" data-ajax="true" data-ajax-loading="#progress" data-ajax-mode="replace" data-ajax-update="#conteudo" id="form" method="post">
                        <input type="hidden" id="unidade" name="unidade" value="@ViewBag.Unidade" />
                        <input class="uppercase txt" id="valorInformado" name="valorInformado" type="text" maxlength="50" placeholder="Pesquise pela descrição" value="" />
                        <input class="btn" type="submit" value="BUSCAR">
                    </form>
                </div>

                // TABELA UNIDADES
                <div class="conteudo-tabela">
                    <table class="">
                        <thead class="cor-degrade-preto">
                            <tr>
                                <th class="radius-top-left radius-top-right">DESCRIÇÃO</th>
                            </tr>
                        </thead>
                        <tbody>
                            @{
                                foreach (var item in Model)
                                {
                                    //MONTAGEM LINK
                                    string href = Request.Url.Scheme + "://" + Request.Url.Authority + "/Evento/AlterarEvento?IdEvento=" + item.IdEvento;

                                    <tr class="linha" onclick="linkLinha('@href')">
                                        <td class="pading-left">@item.Descricao</td>
                                    </tr>
                                            }
                            }
                        </tbody>
                    </table>
                </div>
                                            }
        }

        @{ //RETORNO - PARTIAL VIEW

            // DELETAR
            if (ViewBag.Retorno == "DELETAR")
            {
                @Html.Partial("_RetornoDeletarEvento")
            }
            // ALTERAR
            if (ViewBag.Retorno == "ALTERAR")
            {
                @Html.Partial("_RetornoAlterarEvento")
            }
        }

    </section>
</div>

@* FUNÇÕES QUE SERÃO EXECUTADAS *@
<script type="text/javascript">

    // INTERAÇÕES
    abrirFormulario();
    $('.btn-sair-formulario').on('click', fecharFormulario);
    $('.linha').on('click', fecharFormulario);

</script>


